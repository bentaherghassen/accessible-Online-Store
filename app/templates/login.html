{% extends "layout.html" %} {% block content %}

<h2>Sign In</h2>

<form method="POST" action="/login">
  {{ form.csrf_token }}

  <div class="form-group">
    {{ form.email.label(class="form-label") }} {{
    form.email(class="form-control", placeholder="Enter your email address") }}
    {% if form.email.errors %}
    <ul class="errors">
      {% for error in form.email.errors %}
      <li>{{ error }}</li>
      {% endfor %}
    </ul>
    {% endif %}
  </div>

  <div class="form-group">
    {{ form.password.label(class="form-label") }}
    <div class="input-group">
      {{ form.password(class="form-control", placeholder="Enter your password",
      type="password", id="password-field") }}
      <button
        class="btn btn-outline-secondary"
        type="button"
        id="toggle-password"
      >
        <i class="fa fa-eye-slash"></i>
      </button>
    </div>
    {% if form.password.errors %}
    <ul class="errors">
      {% for error in form.password.errors %}
      <li>{{ error }}</li>
      {% endfor %}
    </ul>
    {% endif %}
  </div>

  <div class="form-check mb-3">
    {{ form.remember(class="form-check-input", id="remember") }}
    <label class="form-check-label" for="remember"> Keep me logged in </label>
  </div>

  <button type="submit" class="btn btn-primary">Login in</button>
</form>

<p class="mt-3">
  Forget your password?
  <a href="{{ url_for('auth.reset_request') }}"><small> Reset Here</small></a>
</p>

<p class="mt-3">
  Don't have an account?
  <a href="{{ url_for('auth.register') }}"><small> Create an account </small></a>
</p>

<script>
  const togglePassword = document.querySelector("#toggle-password");
  const password = document.querySelector("#password-field");

  togglePassword.addEventListener("click", function (e) {
    // toggle the type attribute
    const type =
      password.getAttribute("type") === "password" ? "text" : "password";
    password.setAttribute("type", type);

    // toggle the eye / eye-slash icon
    this.querySelector("i").classList.toggle("fa-eye");
    this.querySelector("i").classList.toggle("fa-eye-slash");
  });
</script>

{% endblock content %}
